(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{404:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(412),a=n.n(r).a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),c={fire:function(e,t){return a.fire({icon:e,title:t})}}},408:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(57),a=n.n(r),c=n(95),o=(n(43),n(33)),u={getSenior:function(){var e=Object(c.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/roles?data=senior").then(function(e){return console.log("response",e),e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getBySeniorName:function(){var e=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/user?data=".concat(t)).then(function(e){return console.log("response",e),e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),editSenior:function(){var e=Object(c.a)(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.put("/updateuser/".concat(t),n).then(function(e){return console.log("response",e),e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),addSenior:function(){var e=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/signup",t).then(function(e){return console.log("response",e),e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getSeniorByCity:function(){var e=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/userByCity/?city=".concat(t,"&role=senior")).then(function(e){return console.log("response",e),e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},411:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(57),a=n.n(r),c=n(95),o=n(33),u={getGroups:function(){var e=Object(c.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/getgroup").then(function(e){return e}).catch(function(e){return console.log(e),!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getGroupsByDateAndCity:function(){var e=Object(c.a)(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/getgroupByDateAndCity?city=".concat(t,"&date=").concat(n)).then(function(e){return e}).catch(function(e){return console.log(e),!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),saveGroups:function(){var e=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/saveGroup",{data:t}).then(function(e){return e}).catch(function(e){return console.log(e),!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),kmean:function(){var e=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/kmean",{data:t}).then(function(e){return e}).catch(function(e){return console.log(e),!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getSeniorBygroupId:function(){var e=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("newid",t),e.next=3,o.a.get("/getseniorBygroup?id=".concat(t)).then(function(e){return e}).catch(function(e){return console.log(e),!1});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),updateGroup:function(){var e=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("newid",t),e.next=3,o.a.put("/updategroup/".concat(t),{status:"Done"}).then(function(e){return e}).catch(function(e){return console.log(e),!1});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},425:function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",function(){return r})},429:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(57),a=n.n(r),c=n(95),o=(n(43),n(33)),u={getVolunteer:function(){var e=Object(c.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/roles?data=volenteer");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getByVolunteerName:function(){var e=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/user?data=".concat(t)).then(function(e){return console.log("response",e),e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),editVolunteer:function(){var e=Object(c.a)(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.put("/updateuser/".concat(t),n).then(function(e){return console.log("response",e),e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),addVolunteer:function(){var e=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/signup",t).then(function(e){return console.log("response",e),e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getVolunteerByCity:function(){var e=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/userByCity/?city=".concat(t,"&role=volenteer")).then(function(e){return console.log("response",e),e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},452:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=(n(58),n(447)),o=n(462),u=Object(c.compose)(Object(c.withProps)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyC43U2-wqXxYEk1RBrTLdkYt3aDoOxO4Fw&v=3.exp&libraries=geometry,drawing,places",loadingElement:a.a.createElement("div",{style:{height:"100%"}}),containerElement:a.a.createElement("div",{style:{height:"400px"}}),mapElement:a.a.createElement("div",{style:{height:"100%"}})}),o.withScriptjs,o.withGoogleMap)(function(e){return a.a.createElement(o.GoogleMap,{defaultZoom:18,defaultCenter:{lat:e.groups[0].centroid[0],lng:e.groups[0].centroid[1]}},e.isMarkerShown&&e.groups.map(function(e){return a.a.createElement(o.Circle,{defaultCenter:{lat:+e.centroid[0],lng:+e.centroid[1]},radius:10,options:{strokeColor:"#ff0000",backgroundColor:"red"}})}))});t.a=u},455:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(57),a=n.n(r),c=n(95),o=n(33),u={getDistributions:function(){var e=Object(c.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/getDistributions").then(function(e){return e}).catch(function(e){return console.log(e),!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),saveDistributions:function(){var e=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/saveDistributions",{data:t}).then(function(e){return e}).catch(function(e){return console.log(e),!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),renewDistributions:function(){var e=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/renewDistributions",{data:t}).then(function(e){return e}).catch(function(e){return console.log(e),!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},903:function(e,t,n){"use strict";n.r(t);var r=n(425),a=n(42),c=n(0),o=n.n(c),u=n(69),s=n(452),i=n(58),l=n(477),p=(n(466),n(408)),f=n(404),m=n(455),d=n(411),h=n(429),g=n(28);t.default=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],b=t[1],v=Object(c.useState)([]),y=Object(a.a)(v,2),E=y[0],w=y[1],j=Object(c.useState)(""),x=Object(a.a)(j,2),O=x[0],N=x[1],k=Object(c.useState)(""),S=Object(a.a)(k,2),C=S[0],B=S[1],D=Object(c.useState)(""),A=Object(a.a)(D,2),G=A[0],V=A[1],M=Object(c.useState)([]),F=Object(a.a)(M,2),I=F[0],P=F[1],K=Object(c.useState)(!1),L=Object(a.a)(K,2),T=L[0],J=L[1],R=Object(c.useState)({}),U=Object(a.a)(R,2),Y=U[0],_=U[1],q=Object(c.useState)([]),z=Object(a.a)(q,2),H=z[0],X=z[1],Z=Object(c.useState)(""),Q=Object(a.a)(Z,2),W=(Q[0],Q[1],Object(g.g)()),$=Object(c.useState)([]),ee=Object(a.a)($,2),te=ee[0],ne=ee[1];Object(c.useEffect)(function(){p.a.getSenior().then(function(e){console.log(e.data),b(e.data.users);var t=Object(r.a)(new Set(e.data.users.map(function(e){return e.addressCity})));P(t)}).catch(function(e){console.log(e)})},[]);var re=function(e){h.a.getVolunteerByCity(e).then(function(e){X(e.data.users)}).catch(function(e){console.log(e)})};return o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:" clearfix mt-0 mb-2"},o.a.createElement("span",{class:" float-left col-6"}," ",o.a.createElement("h4",null,"Add Distribution ")," "),o.a.createElement("span",{className:"text-right"}," ",o.a.createElement(u.a,null))),o.a.createElement("div",{className:"row mt-4"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{class:"form-group"},o.a.createElement("label",{className:"labels"},"Select a city where you want to delivery for this group"),o.a.createElement("select",{class:"form-control bgColForm",id:"exampleFormControlSelect1",onChange:function(e){N(e.target.value),re(e.target.value),w(n.filter(function(t){return t.addressCity==e.target.value}))}},o.a.createElement("option",{value:""},"Choose City"),I.map(function(e){return o.a.createElement("option",{value:e},e)}))),o.a.createElement("div",{className:"mt-5 pt-5"}),o.a.createElement("div",{className:"mt-4"},"List Senior adress that are on this city :",o.a.createElement("b",null,O)," "),o.a.createElement("div",{className:"card",style:{background:"#E5E5E5"}},E.map(function(e){return o.a.createElement("a",null,o.a.createElement("div",{class:"clearfix"},o.a.createElement("div",{type:"button",class:"btn btn-transparent border-0 float-left"},o.a.createElement("i",null," ",e.fullName," ",e.addressCity)),o.a.createElement("div",{type:"button",class:"btn btn-transparent border-0 float-right text-primary"},o.a.createElement("i",null," ",e.needsMedicalSupply?"Needs Medical supply":e.needsMedicalSupply?"needs Food Supply":""))))})),o.a.createElement("div",{className:"text-danger"},"Please select a city first "),o.a.createElement("div",{className:"mt-2"},o.a.createElement("h6",null,"Assign a date to this group")),o.a.createElement("div",{className:!0}),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},o.a.createElement(l.a,{onChange:V})))),o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"mt-5 p-2",style:{background:"#c4c4c4"}},o.a.createElement("div",{className:"row "},o.a.createElement("div",{className:"col-9 d-flex justify-content-center"},o.a.createElement("h6",{className:"mt-4"}," ","How many Voleenteer do you need to allocate")),o.a.createElement("div",{className:"col-2    d-flex justify-content-center mr-1 p-0"},o.a.createElement("h1",{className:"mt-2"},o.a.createElement("input",{type:"number",className:"w-100 h-100",onChange:function(e){return B(e.target.value)}}))))),o.a.createElement("div",null,o.a.createElement("h6",null,"This is the"," ",o.a.createElement("b",null,o.a.createElement("u",null,"K value"))," ","of Kmeans algorithm")),o.a.createElement("div",{className:"row p-5"},o.a.createElement("div",{className:"col p-2 d-flex justify-content-center rounded"},o.a.createElement("button",{className:"btn btn-primary",onClick:function(){if(0==E.length||C<1||""==G)return f.a.fire("error","Please select senior and enter k value");d.a.kmean({senior:E,kValue:C,date:G,city:O}).then(function(e){console.log("frontend res",e),_(e.data),ne(e.data.group),console.log(e.data.group),J(!0)}).catch(function(e){console.log(e)})}},"See on the map the repartition of groups generated"))),T?o.a.createElement("div",null,o.a.createElement("div",{className:"row d-flex justify-content-center"},o.a.createElement("div",{className:"col-md-10"},o.a.createElement(s.a,{isMarkerShown:!0,groups:Y.group}),o.a.createElement("div",{className:"row mt-4  d-flex justify-content-center"},o.a.createElement("span",null,i.h)," ",o.a.createElement("h6",{className:"ml-1 mt-1"},"Groups generated with the K value")))),o.a.createElement("div",{className:"mt-4"},o.a.createElement("h6",null,"Assigned each group to a volunteer in this city")),o.a.createElement("div",{className:"card p-2",style:{background:"#E5E5E5"}},o.a.createElement("a",null,o.a.createElement("div",{class:"clearfix"},o.a.createElement("div",{type:"button",class:"btn btn-transparent border-0 float-left"},Y.group.map(function(e,t){return o.a.createElement("div",{className:"row",key:t},o.a.createElement("div",{className:"col-6"},o.a.createElement("label",null,"Group Id :",e._id)),o.a.createElement("div",{className:"col-6"},o.a.createElement("select",{className:"form-control",onChange:function(e){return function(e,t){console.log(e,t);var n=te;n[t].leader=e,ne(n)}(e.target.value,t)}},o.a.createElement("option",{value:""},"Choose Voleenteer in city"),H.map(function(e){return o.a.createElement("option",{value:e._id},e.fullName)}))))})))))):null)),T?o.a.createElement("div",{className:"row  d-flex justify-content-center mb-4 mt-4"},o.a.createElement("div",{className:"col-md-6 p-2 border border-primary bg-light d-flex justify-content-center  rounded"},o.a.createElement("button",{className:"btn btn-primary",onClick:function(){if(te.filter(function(e){return Object.keys(e).includes("leader")}).length!==te.length||""==O||""==G)return f.a.fire("error","Please select Volunteer");m.a.saveDistributions({date:G,city:O,group:te}).then(function(e){console.log("dis",e),W.push("/manager/distribution/view")}).catch(function(e){console.log(e)})}},"Generate groups and redirect to distribution list"))):null)}}}]);
//# sourceMappingURL=21.14c2860a.chunk.js.map