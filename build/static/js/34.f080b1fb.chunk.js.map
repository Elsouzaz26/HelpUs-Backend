{"version":3,"sources":["service/Groups.js","containers/Manager/Pages/Manager/Stats.styles.js","containers/Manager/Pages/Manager/Stats.js"],"names":["Groups","getGroups","_getGroups","Object","E_help_main_Helpus_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","E_help_main_Helpus_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","wrap","_context","prev","next","instance","get","then","res","catch","err","console","log","abrupt","sent","stop","apply","this","arguments","getGroupsByDateAndCity","_getGroupsByDateAndCity","_callee2","city","date","_context2","concat","_x","_x2","saveGroups","_saveGroups","_callee3","data","_context3","post","_x3","kmean","_kmean","_callee4","_context4","_x4","getSeniorBygroupId","_getSeniorBygroupId","_callee5","id","_context5","_x5","updateGroup","_updateGroup","_callee6","_context6","put","status","_x6","StatWrapper","styled","div","_templateObject","taggedTemplateLiteral","COLORS","RADIAN","Math","PI","renderCustomizedLabel","_ref","cx","cy","midAngle","innerRadius","outerRadius","percent","radius","index","x","cos","y","sin","react_default","createElement","fill","textAnchor","dominantBaseline","toFixed","Stats","_useState","useState","_useState2","slicedToArray","setCity","_useState3","_useState4","setDate","_useState5","_useState6","cities","setCities","_useState7","_useState8","setData","_useState9","_useState10","isChart","setIsChart","useEffect","toConsumableArray","Set","map","grp","name","value","length","filter","d","getGroupByCityAndDate","className","TopbarUser","PieChart","width","height","Pie","labelLine","label","dataKey","entry","Cell","key","esm","onChange","e","toISOString","split","class","target"],"mappings":"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","file":"static/js/34.f080b1fb.chunk.js","sourcesContent":["import { instance } from \"../config/api.config\";\r\n\r\n\r\nexport const Groups = {\r\n  async getGroups() { \r\n     return await instance\r\n      .get(`/getgroup`)\r\n      .then((res) => {\r\n        return res\r\n      }).catch(err => {\r\n        console.log(err)\r\n        return false\r\n      })\r\n  },\r\n  async getGroupsByDateAndCity(city, date) { \r\n    return await instance\r\n     .get(`/getgroupByDateAndCity?city=${city}&date=${date}`)\r\n     .then((res) => {\r\n       return res\r\n     }).catch(err => {\r\n       console.log(err)\r\n       return false\r\n     })\r\n },\r\n  async saveGroups(data) { \r\n    return await instance\r\n     .post(`/saveGroup`, {\r\n         data: data\r\n     })\r\n     .then((res) => {\r\n       return res\r\n     }).catch(err => {\r\n       console.log(err)\r\n       return false\r\n     })\r\n },\r\n async kmean(data) { \r\n    return await instance\r\n     .post(`/kmean`, {data})\r\n     .then((res) => {\r\n       return res\r\n     }).catch(err => {\r\n       console.log(err)\r\n       return false\r\n     })\r\n },\r\n async getSeniorBygroupId(id) { \r\n  console.log(\"newid\",id)\r\n  return await instance\r\n   .get(`/getseniorBygroup?id=${id}`)\r\n   .then((res) => {\r\n     return res\r\n   }).catch(err => {\r\n     console.log(err)\r\n     return false\r\n   })\r\n},\r\n\r\nasync updateGroup(id) { \r\n  console.log(\"newid\",id)\r\n  return await instance\r\n   .put(`/updategroup/${id}`, {status: \"Done\"})\r\n   .then((res) => {\r\n     return res\r\n   }).catch(err => {\r\n     console.log(err)\r\n     return false\r\n   })\r\n},\r\n \r\n};","import styled from \"styled-components\";\n\nconst StatWrapper=styled.div`\n.labels {\n    font-weight: normal;\nfont-size: 16px;\ncolor: #373A3C!important\n}\n\n.left-side {\n    width: 400px\n}\n\nright-side {\n    width: calc(100% - 450px)\n}\n\n.col-50 {\n    display: inline-grid\n}\n`\n\nexport {StatWrapper}","import React, {useEffect, useState} from \"react\";\nimport Calendar from \"react-calendar\";\nimport \"react-calendar/dist/Calendar.css\";\nimport TopbarUser from \"../../../Topbar/TopbarUser\";\nimport { StatWrapper } from \"./Stats.styles\";\nimport { Chart } from \"react-google-charts\"\nimport { PieChart, Pie, Cell } from \"recharts\";\nimport { Groups } from \"../../../../service/Groups\";\n// const data = [\n//     { name: \"Group A\", value: 400 },\n\n//     { name: \"Group D\", value: 200 }\n//   ];\n\nconst COLORS = [\"#0088FE\", \"#00C49F\", \"#FFBB28\", \"#FF8042\"];\n\nconst RADIAN = Math.PI / 180;\n\nconst renderCustomizedLabel = ({\n  cx,\n  cy,\n  midAngle,\n  innerRadius,\n  outerRadius,\n  percent,\n  index\n}) => {\n  const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\n  const x = cx + radius * Math.cos(-midAngle * RADIAN);\n  const y = cy + radius * Math.sin(-midAngle * RADIAN);\n\n  return (\n    <text\n      x={x}\n      y={y}\n      fill=\"white\"\n      textAnchor={x > cx ? \"start\" : \"end\"}\n      dominantBaseline=\"central\"\n    >\n      {`${(percent * 100).toFixed(0)}%`}\n    </text>\n  );\n};\nfunction Stats() {\n  const [city, setCity] = useState(\"\")\n  const [date, setDate] = useState(\"\")\n  const [cities, setCities] = useState([])\n  const [data, setData] = useState([])\n  const [isChart, setIsChart] = useState(false)\n\n\n\n  useEffect(() => {\n    Groups.getGroups().then(res => {\n      setCities([...new Set(res.data.map(grp => grp.city))])\n      setData([\n        { name: \"All\", value: res.data.length },\n        { name: \"done\", value: res.data.filter(d => d.status !== \"To do\").length }   \n      ])\n      if(res.data.length > 0) {\n        setCity(res.data[0].city)\n        setDate(res.data[0].date)  \n        setIsChart(true)\n      }\n      \n    }).catch(err => {\n      console.log(err)\n    })\n  }, [])\n\n\n  const getGroupByCityAndDate = (city, date) => {\n    if(city == \"\" || date == \"\") {\n      return\n    }\n\n    setIsChart(false)\n\n\n    \n    Groups.getGroupsByDateAndCity(city, date).then(res => {\n      setData([\n        { name: \"All\", value: res.data.length },\n        { name: \"done\", value: res.data.filter(d => d.status !== \"To do\").length }   \n      ])\n      setIsChart(true)\n\n    }).catch(err => {\n      console.log(err)\n    })\n  }\n\n  return (\n    <StatWrapper>\n      <div className=\"container-fluid p-3\">\n        <div className=\" clearfix mt-0 mb-2\">\n          <span className=\" float-left col-6\">\n            {\" \"}\n            <h4>Manager STATS </h4>{\" \"}\n          </span>\n          <span className=\"text-right\">\n            {\" \"}\n            <TopbarUser />\n          </span>\n        </div>\n        <div className=\"row \">\n          <div className=\"left-side \">\n            <div className=\"bg-dark rounded mt-4\">\n              <div className=\"\"> <h6 className=\"text-secondary \">Group Status situation</h6></div>\n              <div>\n                {\n                  isChart ?\n                <PieChart width={400} height={400}>\n                  <Pie\n                    data={data}\n                    cx={200}\n                    cy={200}\n                    labelLine={false}\n                    label={renderCustomizedLabel}\n                    outerRadius={80}\n                    fill=\"#8884d8\"\n                    dataKey=\"value\"\n                  >\n                    {data.map((entry, index) => (\n                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                    ))}\n                  </Pie>\n                </PieChart>\n\n                : null\n                }\n                \n              </div>\n\n\n            </div>\n          </div>\n          <div className=\"right-side\">\n\n          <div className=\"col-50\">\n            <div className=\"labels \">Select a date</div>\n            <Calendar onChange={(e) => {\n                  console.log(e.toISOString().split(\"T\")[0])\n                  setDate((e.toISOString().split(\"T\")[0]))\n                  getGroupByCityAndDate(city, e.toISOString().split(\"T\")[0])\n                  \n                }}/>\n          </div>\n          <div className=\"col-50\">\n            <div class=\"form-group\">\n              <div className=\"labels \">Select a city</div>\n\n              <select\n                class=\"form-control bgColForm\"\n                id=\"exampleFormControlSelect1\"\n                value={city }\n                onChange={(e) => {\n\n                  setCity(e.target.value)\n                  getGroupByCityAndDate(e.target.value, date)\n                  \n\n                }}\n              >\n                <option value=\"\"> Choose City</option>\n                {\n                  cities.map(city => {\n                    return <option value={city}> {city}</option>\n                  }) \n                }\n              </select>\n            </div>\n          </div>\n          </div>\n\n        </div>\n      </div>\n\n\n\n\n\n    </StatWrapper>\n  );\n}\n\nexport default Stats;\n"],"sourceRoot":""}